<UserControl x:Class="StingBIM.AI.UI.Controls.ElementPreview"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root"
             Width="180">

    <UserControl.Resources>
        <!-- Action Button Style -->
        <Style x:Key="PreviewActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Opacity" Value="0.7"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="1"/>
                                <Setter Property="Background" Value="{DynamicResource CardBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border Background="{DynamicResource CardBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Margin="0,4">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Preview Image / Placeholder -->
            <Border Grid.Row="0"
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8,8,0,0"
                    Height="100">
                <Grid>
                    <!-- Actual Image (when available) -->
                    <Image x:Name="PreviewImage"
                           Stretch="Uniform"
                           Margin="8"
                           Visibility="Collapsed"/>

                    <!-- Placeholder Icon (when no image) -->
                    <StackPanel x:Name="PlaceholderPanel"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center">
                        <Path x:Name="ElementIcon"
                              Fill="{DynamicResource ForegroundSecondaryBrush}"
                              Width="32" Height="32" Stretch="Uniform"
                              HorizontalAlignment="Center"
                              Opacity="0.5"/>
                        <TextBlock x:Name="ElementTypeText"
                                   Text="Wall"
                                   FontSize="10"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"
                                   Opacity="0.7"/>
                    </StackPanel>

                    <!-- Status Badge -->
                    <Border x:Name="StatusBadge"
                            Background="{DynamicResource SuccessBrush}"
                            CornerRadius="4"
                            Padding="6,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="6">
                        <TextBlock x:Name="StatusText"
                                   Text="Created"
                                   FontSize="10"
                                   FontWeight="SemiBold"
                                   Foreground="White"/>
                    </Border>
                </Grid>
            </Border>

            <!-- Element Info -->
            <StackPanel Grid.Row="1" Margin="10,8,10,6">
                <TextBlock x:Name="ElementNameText"
                           Text="Basic Wall - 200mm"
                           FontSize="12"
                           FontWeight="Medium"
                           Foreground="{DynamicResource ForegroundBrush}"
                           TextTrimming="CharacterEllipsis"/>

                <Grid Margin="0,4,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="ID"
                                   FontSize="9"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                   Opacity="0.7"/>
                        <TextBlock x:Name="ElementIdText"
                                   Text="123456"
                                   FontSize="10"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Level"
                                   FontSize="9"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                   Opacity="0.7"/>
                        <TextBlock x:Name="ElementLevelText"
                                   Text="Level 1"
                                   FontSize="10"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    </StackPanel>
                </Grid>
            </StackPanel>

            <!-- Actions -->
            <Border Grid.Row="2"
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="0,0,8,8"
                    Padding="6">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Style="{StaticResource PreviewActionButtonStyle}"
                            Click="SelectButton_Click"
                            ToolTip="Select in Revit">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z"
                                  Fill="{DynamicResource ForegroundSecondaryBrush}"
                                  Width="14" Height="14" Stretch="Uniform"/>
                            <TextBlock Text="Select"
                                       FontSize="10"
                                       Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                       Margin="4,0,0,0"/>
                        </StackPanel>
                    </Button>

                    <Border Width="1" Height="16" Background="{DynamicResource BorderBrush}" Margin="6,0"/>

                    <Button Style="{StaticResource PreviewActionButtonStyle}"
                            Click="ZoomButton_Click"
                            ToolTip="Zoom to element">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5M9.5,14A4.5,4.5 0 0,0 14,9.5A4.5,4.5 0 0,0 9.5,5A4.5,4.5 0 0,0 5,9.5A4.5,4.5 0 0,0 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z"
                                  Fill="{DynamicResource ForegroundSecondaryBrush}"
                                  Width="14" Height="14" Stretch="Uniform"/>
                            <TextBlock Text="Zoom"
                                       FontSize="10"
                                       Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                       Margin="4,0,0,0"/>
                        </StackPanel>
                    </Button>

                    <Border Width="1" Height="16" Background="{DynamicResource BorderBrush}" Margin="6,0"/>

                    <Button Style="{StaticResource PreviewActionButtonStyle}"
                            Click="PropertiesButton_Click"
                            ToolTip="View properties">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10Z"
                                  Fill="{DynamicResource ForegroundSecondaryBrush}"
                                  Width="14" Height="14" Stretch="Uniform"/>
                            <TextBlock Text="Props"
                                       FontSize="10"
                                       Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                       Margin="4,0,0,0"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</UserControl>
