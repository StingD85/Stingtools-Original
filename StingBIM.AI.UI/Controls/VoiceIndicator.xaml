<UserControl x:Class="StingBIM.AI.UI.Controls.VoiceIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root"
             Width="120" Height="60">

    <UserControl.Resources>
        <!-- Wave bar animation storyboard -->
        <Storyboard x:Key="WaveAnimation" RepeatBehavior="Forever">
            <!-- Bar 1 -->
            <DoubleAnimation Storyboard.TargetName="Bar1"
                             Storyboard.TargetProperty="Height"
                             From="8" To="32" Duration="0:0:0.3"
                             AutoReverse="True"/>
            <!-- Bar 2 -->
            <DoubleAnimation Storyboard.TargetName="Bar2"
                             Storyboard.TargetProperty="Height"
                             From="16" To="40" Duration="0:0:0.4"
                             AutoReverse="True" BeginTime="0:0:0.1"/>
            <!-- Bar 3 -->
            <DoubleAnimation Storyboard.TargetName="Bar3"
                             Storyboard.TargetProperty="Height"
                             From="24" To="48" Duration="0:0:0.35"
                             AutoReverse="True" BeginTime="0:0:0.05"/>
            <!-- Bar 4 -->
            <DoubleAnimation Storyboard.TargetName="Bar4"
                             Storyboard.TargetProperty="Height"
                             From="16" To="40" Duration="0:0:0.4"
                             AutoReverse="True" BeginTime="0:0:0.15"/>
            <!-- Bar 5 -->
            <DoubleAnimation Storyboard.TargetName="Bar5"
                             Storyboard.TargetProperty="Height"
                             From="8" To="32" Duration="0:0:0.3"
                             AutoReverse="True" BeginTime="0:0:0.2"/>
        </Storyboard>

        <!-- Pulse animation for listening state -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="PulseCircle"
                             Storyboard.TargetProperty="Opacity"
                             From="0.8" To="0.2" Duration="0:0:1"
                             AutoReverse="True"/>
            <DoubleAnimation Storyboard.TargetName="PulseCircleScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="0.8" To="1.2" Duration="0:0:1"
                             AutoReverse="True"/>
            <DoubleAnimation Storyboard.TargetName="PulseCircleScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="0.8" To="1.2" Duration="0:0:1"
                             AutoReverse="True"/>
        </Storyboard>
    </UserControl.Resources>

    <Grid>
        <!-- Background pulse circle (visible when listening) -->
        <Ellipse x:Name="PulseCircle"
                 Width="80" Height="80"
                 Fill="{DynamicResource AccentBrush}"
                 Opacity="0"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center">
            <Ellipse.RenderTransform>
                <ScaleTransform x:Name="PulseCircleScale" CenterX="40" CenterY="40"/>
            </Ellipse.RenderTransform>
        </Ellipse>

        <!-- Microphone icon (center) -->
        <Path x:Name="MicrophoneIcon"
              Data="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"
              Fill="{DynamicResource AccentBrush}"
              Width="24" Height="24"
              Stretch="Uniform"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Visibility="Collapsed"/>

        <!-- Sound wave bars (visible when speaking detected) -->
        <StackPanel x:Name="WaveBars"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Visibility="Collapsed">
            <Rectangle x:Name="Bar1" Width="6" Height="8"
                       Fill="{DynamicResource AccentBrush}"
                       RadiusX="3" RadiusY="3"
                       Margin="2" VerticalAlignment="Center"/>
            <Rectangle x:Name="Bar2" Width="6" Height="16"
                       Fill="{DynamicResource AccentBrush}"
                       RadiusX="3" RadiusY="3"
                       Margin="2" VerticalAlignment="Center"/>
            <Rectangle x:Name="Bar3" Width="6" Height="24"
                       Fill="{DynamicResource AccentBrush}"
                       RadiusX="3" RadiusY="3"
                       Margin="2" VerticalAlignment="Center"/>
            <Rectangle x:Name="Bar4" Width="6" Height="16"
                       Fill="{DynamicResource AccentBrush}"
                       RadiusX="3" RadiusY="3"
                       Margin="2" VerticalAlignment="Center"/>
            <Rectangle x:Name="Bar5" Width="6" Height="8"
                       Fill="{DynamicResource AccentBrush}"
                       RadiusX="3" RadiusY="3"
                       Margin="2" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Status text -->
        <TextBlock x:Name="StatusText"
                   Text="Listening..."
                   FontSize="11"
                   Foreground="{DynamicResource ForegroundBrush}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Bottom"
                   Margin="0,0,0,4"
                   Visibility="Collapsed"/>
    </Grid>
</UserControl>
