<UserControl x:Class="StingBIM.AI.UI.Controls.ProgressIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root"
             Width="48" Height="48">

    <UserControl.Resources>
        <!-- Spinning animation -->
        <Storyboard x:Key="SpinAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360"
                             Duration="0:0:1.2"/>
        </Storyboard>

        <!-- Dot pulse animation -->
        <Storyboard x:Key="DotAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="Dot1"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1" Duration="0:0:0.4"
                             AutoReverse="True"/>
            <DoubleAnimation Storyboard.TargetName="Dot2"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1" Duration="0:0:0.4"
                             AutoReverse="True" BeginTime="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetName="Dot3"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1" Duration="0:0:0.4"
                             AutoReverse="True" BeginTime="0:0:0.3"/>
        </Storyboard>
    </UserControl.Resources>

    <Grid>
        <!-- Spinner style -->
        <Grid x:Name="SpinnerContainer" Visibility="Visible">
            <Ellipse Width="40" Height="40"
                     Stroke="{DynamicResource ProgressBackgroundBrush}"
                     StrokeThickness="4"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center"/>

            <Path x:Name="SpinnerArc"
                  Stroke="{DynamicResource AccentBrush}"
                  StrokeThickness="4"
                  StrokeStartLineCap="Round"
                  StrokeEndLineCap="Round"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  RenderTransformOrigin="0.5,0.5">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="24,4">
                            <ArcSegment Point="44,24" Size="20,20" SweepDirection="Clockwise"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <RotateTransform x:Name="SpinnerRotation" Angle="0"/>
                </Path.RenderTransform>
            </Path>
        </Grid>

        <!-- Dots style -->
        <StackPanel x:Name="DotsContainer"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Visibility="Collapsed">
            <Ellipse x:Name="Dot1" Width="8" Height="8"
                     Fill="{DynamicResource AccentBrush}"
                     Opacity="0.3" Margin="2"/>
            <Ellipse x:Name="Dot2" Width="8" Height="8"
                     Fill="{DynamicResource AccentBrush}"
                     Opacity="0.3" Margin="2"/>
            <Ellipse x:Name="Dot3" Width="8" Height="8"
                     Fill="{DynamicResource AccentBrush}"
                     Opacity="0.3" Margin="2"/>
        </StackPanel>

        <!-- Brain thinking style -->
        <Grid x:Name="BrainContainer" Visibility="Collapsed">
            <Path Data="M12,3C10.34,3 9,4.34 9,6V7.07C7.27,7.5 6,9.06 6,11A4,4 0 0,0 10,15H12V13H10A2,2 0 0,1 8,11C8,9.34 9.34,8 11,8H13C14.66,8 16,9.34 16,11A2,2 0 0,1 14,13H12V15H14A4,4 0 0,0 18,11C18,9.06 16.73,7.5 15,7.07V6C15,4.34 13.66,3 12,3M12,17A2,2 0 0,0 10,19A2,2 0 0,0 12,21A2,2 0 0,0 14,19A2,2 0 0,0 12,17Z"
                  Fill="{DynamicResource AccentBrush}"
                  Width="32" Height="32"
                  Stretch="Uniform"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  RenderTransformOrigin="0.5,0.5">
                <Path.RenderTransform>
                    <ScaleTransform x:Name="BrainScale"/>
                </Path.RenderTransform>
            </Path>
        </Grid>
    </Grid>
</UserControl>
