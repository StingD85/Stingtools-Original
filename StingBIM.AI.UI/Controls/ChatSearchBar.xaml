<UserControl x:Class="StingBIM.AI.UI.Controls.ChatSearchBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root"
             Height="44">

    <UserControl.Resources>
        <!-- Navigation Button Style -->
        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource CardBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.4"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border Background="{DynamicResource SurfaceBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="0,0,0,1"
            Padding="8,6">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Search Icon -->
            <Path Grid.Column="0"
                  Data="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"
                  Fill="{DynamicResource ForegroundSecondaryBrush}"
                  Width="16" Height="16" Stretch="Uniform"
                  Margin="4,0,8,0" VerticalAlignment="Center"/>

            <!-- Search Input -->
            <Grid Grid.Column="1">
                <TextBox x:Name="SearchTextBox"
                         Background="Transparent"
                         BorderThickness="0"
                         Foreground="{DynamicResource ForegroundBrush}"
                         FontSize="13"
                         VerticalContentAlignment="Center"
                         TextChanged="SearchTextBox_TextChanged"
                         KeyDown="SearchTextBox_KeyDown"/>

                <TextBlock x:Name="PlaceholderText"
                           Text="Search in conversation... (Esc to close)"
                           Foreground="{DynamicResource PlaceholderBrush}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           IsHitTestVisible="False"
                           Margin="2,0,0,0"/>
            </Grid>

            <!-- Result Count -->
            <TextBlock Grid.Column="2"
                       x:Name="ResultCountText"
                       Text="0 of 0"
                       FontSize="11"
                       Foreground="{DynamicResource ForegroundSecondaryBrush}"
                       VerticalAlignment="Center"
                       Margin="8,0"/>

            <!-- Previous Button -->
            <Button Grid.Column="3"
                    x:Name="PreviousButton"
                    Style="{StaticResource NavButtonStyle}"
                    Click="PreviousButton_Click"
                    ToolTip="Previous match (Shift+Enter)"
                    IsEnabled="False">
                <Path Data="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"
                      Fill="{DynamicResource ForegroundSecondaryBrush}"
                      Width="14" Height="14" Stretch="Uniform"/>
            </Button>

            <!-- Next Button -->
            <Button Grid.Column="4"
                    x:Name="NextButton"
                    Style="{StaticResource NavButtonStyle}"
                    Click="NextButton_Click"
                    ToolTip="Next match (Enter)"
                    IsEnabled="False">
                <Path Data="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
                      Fill="{DynamicResource ForegroundSecondaryBrush}"
                      Width="14" Height="14" Stretch="Uniform"/>
            </Button>

            <!-- Close Button -->
            <Button Grid.Column="5"
                    x:Name="CloseButton"
                    Style="{StaticResource NavButtonStyle}"
                    Click="CloseButton_Click"
                    ToolTip="Close (Esc)"
                    Margin="4,0,0,0">
                <Path Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
                      Fill="{DynamicResource ForegroundSecondaryBrush}"
                      Width="12" Height="12" Stretch="Uniform"/>
            </Button>
        </Grid>
    </Border>
</UserControl>
